## Part 1. Установка ОС
Для установки ОС скачиваем серверную версию Ubuntu 20.04 с официального сайта https://releases.ubuntu.com/focal/. В VirtualBox создаем новую виртуальную машину, указываем имя и тип ОС, выделяем оперативную память и создаем новый виртуальный жесткий диск (динамический).
Запускаем ОС, выбираем язык, нажимаем done до момента создания пользователя. Устанавливаем OpenSSH-сервер и ждем установки системы. Rebbot'ем систему.
После запуска вводим login и password. Система готова.

![Screenshot 1](Task_1/1.png "1. Установка сервера Ubuntu")

## Part 2. Создание пользователя
Создаем пользователя coolAdmin через команды, представленные на скриншотах

![Screenshot 1](Task_2/1.png "1. Создание нового пользователя, установка пароля для него и добавление в группу adm")

Проверяем его нахождение в группе adm

![Screenshot 2](Task_2/2.png "2. Проверка нахождения пользователя в группе adm")

## Part 3. Настройка сети ОС
Меняем имя хоста на user-1 через sudo vim /etc/hostname

![Screenshot 1](Task_3/1.png "1. Имя хоста изменено на user-1")

Проверяем текущее локальное время timedatectl

![Screenshot 2](Task_3/2.png "2. Локальное время до изменения часового пояса")

Устанавливаем локальное время по часововму поясу Москвы

![Screenshot 3](Task_3/3.png "3. Изменение часового пояса на московский")

Выводим название сетевых интерфейсов с помощью ip a, сбрасываем старый ip-адрес. 
Интерфейс lo используется как средство межпроцессного обмена информацией локальных процессов и присутствует по-умолчанию в любом Linux.

![Screenshot 4](Task_3/4.png "4. Название сетевых интерфейсов, сброшен старый ip-адрес")

Получаем ip адрес рабочего устройства от DHCP сервера. DHCP - Dynamic Host Configuration Protocol, протокол автоматизации назначения IP-адреса клиенту.

![Screenshot 5](Task_3/5.png "5. Получение нового ip-адреса устройства от DHCP сервера")

Определяем внешний и внутренний ip адреса

![Screenshot 6](Task_3/6.png "6. Внешний и внутренний ip-адреса")

Задаем статичные настройки ip, gw, dns

![Screenshot 7](Task_3/7.png "7. Настройки  файла 00-installer-config.yaml для сети enp0s3")

Перезагружаем систему sudo reboot. Проверяем сетевые настройки - совпадают

![Screenshot 8](Task_3/8.png "8. Новый статический ip-адрес")

Пропинговываем удаленные хосты 1.1.1.1 и ya.ru. Убеждаемся, что нет потерь пакетов

![Screenshot 9](Task_3/9.png "9. Пингование удаленного хоста, 0% потерь пакетов")
![Screenshot 10](Task_3/10.png "10. ping 1.1.1.1")

## Part 4. Обновление ОС
Обновляем систему через sudo apt update -> sudo apt dist-upgrade. При повторной попытке обновления - обновления отсутствуют

![Screenshot 1](Task_4/1.png "1. Скачивание и установка обновлений через команды apt update / apt dist-upgrade")

## Part 5. Использование команды sudo
Создаем папку с правами для пользователя coolAdmin sudo touch /etc/sudoers.d/coolAdmin.
Sudo (Substitute User and do, дословно «подменить пользователя и выполнить») — программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы. Основная идея — дать пользователям как можно меньше прав, при этом достаточных для решения поставленных задач. Программа поставляется для большинства UNIX и UNIX-подобных операционных систем.

Команда sudo предоставляет возможность пользователям выполнять команды от имени суперпользователя root, либо других пользователей. Правила, используемые sudo для принятия решения о предоставлении доступа, находятся в файле /etc/sudoers (для редактирования файла можно использовать специальный редактор visudo, запускаемый из командной строки без параметров, в том числе без указания пути к файлу); язык их написания и примеры использования подробно изложены в man sudoers(5).

В большинстве случаев грамотная настройка sudo делает небезопасную работу от имени суперпользователя ненужной. Все действия оказываются выполнимы из-под аккаунта пользователя, которому разрешено использовать sudo без ограничений. Имеется возможность запрещать и разрешать определённым пользователям или группам выполнение конкретного набора программ, а также разрешить выполнение определённых программ без необходимости ввода своего пароля.

Редактируем через vim, добавляя строку "coolAdmin ALL=(ALL:ALL) ALL".

Заходим через пользователя coolAdmin - su coolAdmin. Меняем имя хоста sudo vim /etc/hostname. Ребутаем систему, наслаждаемся изменениями. 

![Screenshot 1](Task_5/1.png "1. Изменение имени hostname через пользователя coolAdmin с правами root")

## Part 6. Установка и настройка службы времени
Установка network time protocol sudo apt install -y ntp

![Screenshot 1](Task_6/1.png "1. Установка network time protocol")
![Screenshot 2](Task_6/2.png "2. Список подключенных серверов времени")

Останавливаем ntp и синхронизируем время

![Screenshot 3](Task_6/3.png "3. Остановка ntp и принудительная синхронизация времени")

Запуск ntp и проверка состояния службы

![Screenshot 4](Task_6/4.png "4. Запуск ntp и проверка состояния службы")

Проверка синхронизации - не синхронизированно. После удаления ntp синхронизация состоялась

![Screenshot 5](Task_6/5.png "5. Проверка синхронизации - no. Удаляем ntp, после чего синхронизация - yes")

## Part 7. Установка и использование текстовых редакторов
VIM и NANO уже предустановлены в Ubuntu, устанавливаем только MCEDIT

![Screenshot 3](Task_6/3.png "3. Установка mcedit")

VIM: сохранение и выход ":wq", выход без сохранения ":q!", поиск "/(искомое слово)", поиск и замена ":s /(искомое слово)/(замена)/g(если необходимо заменить во всем файле)";

![Screenshot 1](Task_7/1.png "VIM сохранение и выход")
![Screenshot 5](Task_7/5.png "VIM выход без сохранения")
![Screenshot 8](Task_7/8.png "VIM замена")
![Screenshot 8.1](Task_7/8.1.png "VIM поиск")

NANO: сохранение и выход "control+o - control+x", выход без сохранения "control+x - No", поиск "control+w", поиск и замена ":control + \";

![Screenshot 2](Task_7/2.png "NANO сохранение и выход")
![Screenshot 6](Task_7/6.png "NANO выход без сохранения")
![Screenshot 9](Task_7/9.png "NANO замена")
![Screenshot 9.1](Task_7/9.1.png "NANO поиск")

MCEDIT: сохранение и выход "Save - Quit", выход без сохранения "Quit", поиск "Search", поиск и замена "Replace".

![Screenshot 4](Task_7/4.png "MCEDIT сохранение и выход")
![Screenshot 7](Task_7/7.png "MCEDIT выход без сохранения")
![Screenshot 10](Task_7/10.png "MCEDIT замена")
![Screenshot 10.1](Task_7/10.1.png "MCEDIT поиск")

Скриншот с выводом содержимого файлов после выхлода без сохранения

![Screenshot 11](Task_7/11.png "Содержимое файлов без сохранения")

## Part 8. Установка и базовая настройка сервиса SSHD
Настройка SSHD:

Заходим по нашим пользователем в окне virtualbox и вводим команду:  
sudo nano /etc/ssh/sshd_config. 
Удаляем комментарий рядом с надписью #Port 22 и меняем цифру 22 на 2022. Так же разрешаем логиниться под root.  
Далее разрешаем как логин по ключу, так и логин по паролю:  
Сохраняем, закрываем, перезапускаем демона. 
После проверяем что демон перезапустился, командой sudo service sshd status. 

![Screenshot 1](Task_8/1.png "Конфигурация sshd")

Настройка файервола:

sudo ufw status - status inactive. 
активируем его командой sudo ufw enable - Firewall is active and enable on system startup. 
sudo ufw allow 2022. 
Rule added. 
Rule added (V6). 

![Screenshot 2](Task_8/2.png "Состояние ufw")

Удалённое подключение ssh joaquind@localhost -p 2022. 

Генерация ключей:   
cd .ssh. 
mkdir joaquind. 
cd joaquind && pwd. 
ssh-keygen. 
вставляем путь из pwd. 
Передать сгенерированный ключ нашему хосту:
ssh-copy-id -i id_rsa.pub joaquind@localhost -p 2022. 

Создание конфига ssh:
nano ~/.ssh/config. 
Host localhost. 
IdentityFile ~/.ssh/joaquind/id_rsa. 

sudo nano /etc/ssh/sshd_config. 
снимаем комментарий со строки AuthorizedKeysFile. 
комментируем строку PasswordAuthentication. 
reboot. 
sudo service sshd restart. 
control + d. 

![Screenshot 4](Task_8/4.png "Состояние ssh после рестарта")

![Screenshot 3](Task_8/3.png "Наличие ssh в ps")

Значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.
ps aux | grep sshd. 
a - указывает ps вывести на дисплей процессы всех пользователей, за исключением тех процессов, которые не связаны с терминалом и процессами группы лидеров.  
u — подставки для ориентированных на пользователя формате, который обеспечивает подробную информацию о процессах.  
x - ps перечисляет процессы без управляющего терминала. В основном это процессы, которые запускаются во время загрузки и работают в фоновом режиме.  

nano /etc/ssh/sshd_config  
netstat -tan. 

![Screenshot 5](Task_8/5.png "netstat -tan")

netstat (network statistics) — утилита командной строки, выводящая на дисплей состояние TCP-соединений (как входящих, так и исходящих), таблицы маршрутизации, число сетевых интерфейсов и сетевую статистику по протоколам. Доступна в операционных системах семейства UNIX и Windows. Основное назначение утилиты — поиск сетевых проблем и определение производительности сети.  
-t : Показать ссылку, к которой подключен TCP. 
-a : Все статусы. 
-n : Отображение IP и ПОРТА в цифровом формате. 

proto - Протокол (обычно unix), используемый сокетом.

Recv-Q - Счётчик байт не скопированных программой пользователя из этого сокета.

Send-Q - Счётчик байтов, не подтверждённых удалённым узлом.

Local Address - Адрес и номер порта локального конца сокета. Если не указана опция --numeric (-n), адрес сокета преобразуется в каноническое имя узла (FQDN), и номер порта преобразуется в соответствующее имя службы.

Foreign Address - Адрес и номер порта удалённого конца сокета. Аналогично "Local Address."

state Состояние сокета. Поскольку в режиме raw нет состояний, а в режиме UDP состояния обычно не испольуются, эта колонка может оставаться пустой. Обычно состояние может принимать одно из нескольких значений:

ESTABLISHED - соединение установлено. 
SYN_SENT - сокет пытается установить соединение   
SYN_RECV - начальная синхронизация соединения. 
FIN_WAIT1 - сокет закрыт, ожидание отключения соединения. 
FIN_WAIT2 - ожидание отключения удаленной стороны
TIME_WAIT - ожидание после закрытия повторной передачи отключения удаленной стороны. 
CLOSED - соединение закрыто, сокет не используется. 
CLOSE_WAIT - удаленный узел отключился, сокет скоро будет закрыт. 
LAST_ACK - сначала отключилась удаленная сторона, а затем сокет будет закрыт. 
LISTEN - сокет ожидает входящих соединений. 
CLOSING - закрытие сокета, точнее сокет закрыт, а затем отключился удаленный узел. 
UNKNOWN - состояние сокета неизвестно.

IP-адрес 0.0.0.0 — это немаршрутизируемый адрес IPv4, который можно использовать в разных целях, в основном, в качестве адреса по умолчанию или адреса-заполнителя. Несмотря на то, что адрес 0.0.0.0 может использоваться в компьютерных сетях, он не является адресом какого-либо устройства.

:* обозначает, что поля порта удаленного адреса еще не заполнены.


## Part 9. Установка и использование утилит top, htop
top :

![Screenshot 1](Task_9/1.png "top")

uptime - 5 hours 28 minutes;
количество авторизованных пользователей - 2 users;
общую загрузку системы - 0;
общее количество процессов - 123;
загрузку cpu - 0;
загрузку памяти - MiB Mem - 198.7, MiB Swap - 0;
pid процесса занимающего больше всего памяти - сортируем Shift+M - snapd

![Screenshot 2](Task_9/2.png "pid процесса занимающего больше всего памяти")

pid процесса, занимающего больше всего процессорного времени - выходим через "q", самый верхний процесс - systemd

![Screenshot 3](Task_9/3.png "pid процесса, занимающего больше всего процессорного времени")

htop:
отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME

![Screenshot 4](Task_9/4.png "Сортировка по PID")
![Screenshot 5](Task_9/5.png "Сортировка по PERCENT_CPU")
![Screenshot 6](Task_9/6.png "Сортировка по PERCENT_MEM")
![Screenshot 7](Task_9/7.png "Сортировка по TIME")

отфильтрованному для процесса sshd - F4 Filter sshd

![Screenshot 8](Task_9/8.png "Отфильтрованный для процесса sshd")

с процессом syslog, найденным, используя поиск - F3 Search syslog

![Screenshot 9](Task_9/9.png "Поиск syslog")

с добавленным выводом hostname, clock и uptime - F2 Setup - Добавляем нужные опции

![Screenshot 10](Task_9/10.png "Добавляем опции")
![Screenshot 11](Task_9/11.png "Вид после обновления")

## Part 10. Использование утилиты fdisk
Запустить команду fdisk -l

![Screenshot 1](Task_10/1.png "fdisk -l")

Название жесткого диска - /dev/sda. 
Размер - 10 Gib. 
Количество секторов - 20971520. 
Размер swap - sudo swapon --show - 1.5G. 

![Screenshot 2](Task_10/2.png "- sudo swapon --show")

## Part 11. Использование утилиты df

Запустить команду df

![Screenshot 1](Task_11/1.png "df")

В отчёте написать для корневого раздела (/):

![Screenshot 2](Task_11/2.png "df /")

размер раздела - 8408452. 
размер занятого пространства - 4332572. 
размер свободного пространства - 3627164. 
процент использования - 55%. 

Определить и написать в отчёт единицу измерения в выводе - блоки по 512 байт. 

Запустить команду df -Th.

![Screenshot 3](Task_11/3.png "df -Th")

В отчёте написать для корневого раздела (/):

![Screenshot 4](Task_11/4.png "df -Th /")

размер раздела - 8.1G
размер занятого пространства - 4.2G
размер свободного пространства - 3.5G
процент использования - 55%

Определить и написать в отчёт тип файловой системы для раздела - гигабайты

## Part 12. Использование утилиты du

Запустить команду du.

![Screenshot 1](Task_12/1.png "du")

Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде) - используем du -bh

![Screenshot 2](Task_12/2.png "Размер /home")
![Screenshot 3](Task_12/3.png "Размер /var")
![Screenshot 4](Task_12/4.png "Размер /var/log")

Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя "\*") - используем du -bh /var/log/*

![Screenshot 5](Task_12/5.png "Размер всего содержимого в /var/log")

## Part 13. Установка и использование утилиты ncdu
Устанавливаем sudo apt install ncdu

![Screenshot 1](Task_13/1.png "Устанавливаем sudo apt install ncdu")

Вывести размер папок /home, /var, /var/log - команда ncdu /

![Screenshot 2](Task_13/2.png "Размер /home")
![Screenshot 3](Task_13/3.png "Размер /var")
![Screenshot 4](Task_13/4.png "Размер /var/log")

## Part 14. Работа с системными журналами

Открыть для просмотра:

команда tail
1. /var/log/dmesg
2. /var/log/syslog
3. /var/log/auth.log

![Screenshot 1](Task_14/1.png "Просмотр логов")

Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему - 17:51:59, joaqund.

![Screenshot 2](Task_14/2.png "Просмотр лога последней успешной авторизации")

Перезапустить службу SSHD - sudo service sshd restart

![Screenshot 3](Task_14/3.png "Перезапуск службы SSHD")

Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

![Screenshot 4](Task_14/4.png "Лог после перезапуска SSHD")

## Part 15. Использование планировщика заданий CRON

Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

![Screenshot 1](Task_15/1.png "Использование команды crontab -e")

Команда crontab -e, выбираем редактор (взял VIM), добавляем под комментариями строку "*/2 * * * * uptime | wall"

Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.

![Screenshot 3](Task_15/3.png "Логи с выполненным заданием")

Вывести на экран список текущих заданий для CRON.

![Screenshot 4](Task_15/4.png "Список текущих заданий")

Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.

![Screenshot 2](Task_15/2.png "Отображение выполнения задания в терминале")

Удалите все задания из планировщика заданий.

В отчёт вставьте скрин со списком текущих заданий для CRON.

![Screenshot 5](Task_15/5.png "Список текущих задач после удаления всех задач")
